/*! For license information please see bundle.js.LICENSE.txt */
var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.d(e,{eL:()=>Qe,l6:()=>Je,gA:()=>kn,mb:()=>dt,jN:()=>Ht,y3:()=>go,XT:()=>Wt,Pr:()=>An,N_:()=>xe,OS:()=>F,oB:()=>fo,$U:()=>So,tT:()=>_o,is:()=>pn,YW:()=>Cn,nR:()=>vn,AH:()=>Fe,sg:()=>dn,Ay:()=>jo,cb:()=>yn,Px:()=>hn,EL:()=>lt,Jx:()=>Ye,qy:()=>ve,Fr:()=>xo,cY:()=>We,rN:()=>Ue,xB:()=>pt,ak:()=>vt,O8:()=>yt,zk:()=>ft,yy:()=>Ze,qS:()=>ht,k_:()=>on,op:()=>qe,W7:()=>ze,Tw:()=>Be});var n={};t.r(n),t.d(n,{angleDistanceToTranslate:()=>c,angleToDirection:()=>a,calculateAngle:()=>u,calculateFourAngleSnap:()=>s,rotateDegrees:()=>i});var r,o={1:"x-uppad",2:"x-downpad",3:"x-leftpad",4:"x-rightpad",5:"x-menu",6:"x-start",7:"x-rightjoy",8:"x-leftjoy",9:"x-leftbumper",10:"x-rightbumper",13:"x-A",14:"x-X",15:"x-B",16:"x-Y"};function i(t,e){return(t+e)%360}function a(t){return["up","right","down","left"][Math.round(t/90)%4]}function u(t,e,n,r){var o=n-t,i=r-e,a=Math.atan2(i,o)*(180/Math.PI);return a<0&&(a+=360),(a+=90)>=360&&(a-=360),a}function s(t){return[0,90,180,270,0][Math.round(t/90)%4]}function c(t,e){var n=(t=i(t,-90))*Math.PI/180;return"translate("+e*Math.cos(n)+"px, "+e*Math.sin(n)+"px)"}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.onDown,o=n.onStartMove,i=n.onMove,c=n.onUp,f=n.once,h=void 0!==f&&f,p=n.deadzone,y=void 0===p?null:p,v=n.capture,d=void 0!==v&&v,m=n.captureMove,b=void 0!==m&&m,g=n.verbose,w=void 0!==g&&g,k=n.stopPropagation,E=void 0!==k&&k,S=n.stopImmediatePropagation,_=void 0!==S&&S,O=n.stopMovePropagation,j=void 0!==O&&O,x=n.stopImmediateMovePropagation,A=void 0!==x&&x,T=n.movePrecision,P=void 0===T?1:T,L=function(n){y=y||e.moveTripperDist;var f=e.beforePointerEvent("pointerdownmoveup",n);if(!f)return!1;var p={startX:n.clientX,startY:n.clientY},v=p.event_fuse,d=void 0===v?e.returnFuse(!0):v,m=p.pointerDown,g=void 0===m?e.returnFuse(!0):m,k=p.startX,S=p.startY;e.activeEvents.push(d);var O=e.simpleMoveTripper({startX:k,startY:S,deadzone:y}),x=O.move_fuse,T=O.check;E&&n.stopPropagation(),_&&n.stopImmediatePropagation();var L={},C=L.startAngle,M=void 0===C?null:C,R=L.moveCalledOnce,N=void 0!==R&&R,I=L.latest_move_e,D=void 0===I?null:I,B=L.startMove,F=r({dwn_e:n,b4:f,move_fuse:x,pointerDown:g,event_fuse:d,kingOfTheStack:function(t){return e.kingOfTheStack(d)},pathContains:function(t){return yt(n,t)}});if(!F)return!1;var z=function(t){return u(k,S,t.clientX,t.clientY)},q=function(t){return Math.sqrt(Math.pow(t.clientX-k,2)+Math.pow(t.clientY-S,2))},Y=function(t){return s(z(t))},W=0,U=function(u){try{if(d.false)return w&&console.log({element:t},"event_fuse.false, returning"),H();if(W++,P>1){if(W<P)return;W=0}if(D=u,!T(u))return;M||(M=z(u));var s={dwn_e:n,mv_e:u,startX:k,startY:S,startAngle:M,movementX:u.movementX,movementY:u.movementY,stop:H,up:X,move_fuse:x,startMove:B,kingOfTheStack:function(t){return e.kingOfTheStack(d)},clearAllSelections:function(){return e.clearAllSelections()},fourAngleSnap:function(){return Y(u)},angleFromStart:function(){return z(u)},distanceFromStart:function(){return q(u)},direction:function(){return a(z(u))}};if(j&&u.stopPropagation(),A&&u.stopImmediatePropagation(),N&&i)return i(s,F);if(o){if(!(B=o(s,F)))return!1;var f,p;"object"===l(B)&&null!==B&&("onMove"in B||"onUp"in B)&&((null===(f=B)||void 0===f?void 0:f.onMove)&&(i=B.onMove),(null===(p=B)||void 0===p?void 0:p.onUp)&&(c=B.onUp))}e.kingOfTheStack(d),N=!0}catch(e){console.error(e,{element:t,onDown:r,onStartMove:o,onMove:i,onUp:c,once:h})}},X=function(t){g.False(),H(),c&&c({dwn_e:n,up_e:t,mv_e:D,startX:k,startY:S,startAngle:M,startMove:B,move_fuse:x,onStartMove:o,fourAngleSnap:function(){return Y(t)},angleFromStart:function(){return z(t)},distanceFromStart:function(){return q(t)},direction:function(){return a(z(t))}},F)};document.addEventListener("pointermove",U,{capture:b}),document.addEventListener("pointerup",X),document.addEventListener("pointercancel",X);var H=function(t){document.removeEventListener("pointermove",U,{capture:b}),document.removeEventListener("pointerup",X),document.removeEventListener("pointercancel",X)}};return t.addEventListener("pointerdown",L,{once:h,capture:d}),{removeEventListener:function(e){return t.removeEventListener("pointerdown",L,{capture:d})}}}function h(t,e,n){var r=this,o=n||e,i=o.onClick,a=void 0===i?"function"==typeof e?e:null:i,u=o.onDown,s=void 0===u?null:u,c=o.once,l=void 0!==c&&c,f=o.capture,h=void 0!==f&&f,p=o.stopPropagation,y=void 0!==p&&p,v=o.stopImmediatePropagation,d=void 0!==v&&v,m=function(e){if(y&&e.stopPropagation(),d&&e.stopImmediatePropagation(),1===e.which){var n=r.beforePointerEvent("clickone",e);if(n){var o=null==s?void 0:s(e),i=e.clientX,u=e.clientY,c=e.target,l=r.returnFuse(!0);r.activeEvents.push(l);var f=r.moveTripper({startX:i,startY:u}).check;t.addEventListener("pointerup",(function(t){!f(t)&&l.true&&t.target===c&&(r.kingOfTheStack(l),a({dwn_e:e,up_e:t,down_return:o},n))}),{once:!0})}}};return t.addEventListener("pointerdown",m,{once:l,capture:h}),{unbind:function(e){return t.removeEventListener("pointerdown",m,{capture:h})}}}function p(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.single,o=n.double,i=n.doubleWait,a=void 0!==i&&i,u=n.cooldown,s=n.cooldownDuration,c=void 0===s?350:s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=l.active_fuse,h=void 0===f?this.returnFuse():f,p=l.db_fuse,y=void 0===p?this.returnFuse():p;this.on(t).clickOne((function(t){var n=t.dwn_e;if(t.up_e,!u){if(h.true)return y.True();jo({}).delay("click",a||e.clickOrTwoWindowMs,(function(){h.reset(),y.falseTrue((function(t){return r(n)}),(function(t){o(n),u=setTimeout((function(){return u=null}),c)})),y.reset()})),h.True()}}))}function y(t,e,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.once,a=void 0!==i&&i,u=o.capture,s=void 0!==u&&u;this.on(t).pointerdownmoveup({onDown:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.dwn_e,a=o.b4,u=o.move_fuse,s=o.pointerDown,c=o.event_fuse;return!yt(i,"[no-custom-rclick]")&&(e({dwn_e:i,b4:a}),jo(t).delay("pointer-down",r.mobilePressHoldDelay,(function(){!u.true&&s.true&&c.true&&(r.kingOfTheStack(c),n({dwn_e:i}))})),!0)},onUp:function(t){var e=t.up_e,r=t.dwn_e,o=t.move_fuse;if("mouse"===e.pointerType&&2===e.button){if(o.true)return;n({up_e:e,dwn_e:r})}},once:a,capture:s})}function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function g(t){var e=function(t,e){if("object"!=v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:e+""}var w=function(){return t=function t(){var e,n,o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tapsToExit=3,this.backPresses=this.tapsToExit,window.history.pushState({},""),window.addEventListener("popstate",(function(){return o.handleBackButton()})),ve(r||(e=['\n\t\t\t<div this="tap_indicator" class="tap-to-exit-confirm">\n\t\t\t\t<div class="tap-to-exit-label" pr0x="nth">Go back 3 more times to exit app.</div>\n\t\t\t</div>\n\t\t'],n||(n=e.slice(0)),r=Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})))).bind(this),this.onBack=[]},e=[{key:"handleBackButton",value:function(){var t,e=this,n=this.onBack.sort((function(t,e){return t.weigth>e.weigth?1:-1})),r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(n);try{for(r.s();!(t=r.n()).done;)if(t.value.cb())return void window.history.pushState({},"")}catch(t){r.e(t)}finally{r.f()}this.backPresses<3&&window.navigator.vibrate([300]),jo(this).delay("back-panic",700,(function(){e.backPresses=e.tapsToExit,window.history.pushState({},""),e.tap_indicator.classList.remove("visible")})),this.tap_indicator.classList.add("visible");var o=Math.max(1,this.backPresses);return this.proxy.nth="Go back ".concat(o," more time").concat(ss(o)," to exit app."),this.backPresses--,xo()&&this.backPresses<=0||this.backPresses<0?window.history.back():void window.history.pushState({},"")}},{key:"on",value:function(t,e){this.onBack.push(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],(o=g(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({cb:t,weigth:0},e))}}],e&&b(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function S(t){var e=function(t,e){if("object"!=k(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==k(e)?e:e+""}var _=function(){return t=function t(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.scrollTarget,a=o.overrideDefaultScroll,u=void 0!==a&&a,s=o.onPointerMove,c=o.onScroll;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=n,this.scrollTarget=i||n,this.velocityY=0,this.animating=!1,this.pointerDown=!1,this.friction=.94,this.direction="down",this.minVelocityY=1,this.maxVelIncr=20,this.maxVelocityY=400,this.smallDeltaStep={floor:10,culm:0,culmLimit:40,tick:50},u&&this.container.addEventListener("wheel",(function(t){c&&!c(t)||r.wheel(t)}),{capture:!0,passive:!1}),e.on(this.container).pointerdownmoveup({capture:!0,captureMove:!0,onDown:function(){return r.pointerDown=!0,{selectionRange:window.getSelection()}},onStartMove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.direction,n=t.stop,r=t.clearAllSelections,o=e();return"left"===o||"right"===o?n():(r(),!0)},onMove:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.mv_e,n=t.movementY;if(function(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),e.stopPropagation(),e.stopImmediatePropagation(),0!==n){r.container.classList.add("Scrolling"),s&&s({mv_e:e,movementY:n});var o=e.shiftKey?1:.5;e.altKey&&(o/=4);var i=n*-o;r.addVelocity(i)}},onUp:function(){r.container.classList.remove("Scrolling"),r.pointerDown=!1}}),this.tick_length=8,this.lastFramePerf=null},e=[{key:"__animate__",value:function(){!this.animating&&(this.animating=!0)&&requestAnimationFrame(this.__frame__.bind(this))}},{key:"__framedelta__",value:function(){var t=performance.now();if(null===this.lastFramePerf)return this.lastFramePerf=t,0;var e=t-this.lastFramePerf;return this.lastFramePerf=t,e/this.tick_length}},{key:"__frame__",value:function(){var t=this.__framedelta__(),e=this.pointerDown?.95*this.friction:this.friction;this.velocityY*=Math.pow(e,t);var n=Math.abs(this.velocityY),r=this.velocityY*t;if(this.scrollTarget.scrollTop+=r,n<this.minVelocityY)return this.lastFramePerf=null,void(this.animating=!1);this.animating&&requestAnimationFrame(this.__frame__.bind(this))}},{key:"checkCounterScroll",value:function(t){(t.deltaY>0&&this.velocityY<0||t.deltaY<0&&this.velocityY>0)&&(this.velocityY/=10)}},{key:"resetVelocity",value:function(){this.velocityY/=10,this.__animate__()}},{key:"addVelocity",value:function(t){(t>0&&this.velocityY<0||t<0&&this.velocityY>0)&&(this.velocityY/=10),this.velocityY=Math.min(this.velocityY+t,this.maxVelocityY),this.__animate__()}},{key:"wheel",value:function(t){t.preventDefault(),t.stopPropagation(),this.checkCounterScroll(t),this.direction=t.deltaY>0?"down":"up",Math.abs(t.deltaY)<this.smallDeltaStep.floor?(this.smallDeltaStep.culm+=t.deltaY,Math.abs(this.smallDeltaStep.culm)>this.smallDeltaStep.culmLimit&&(this.addVelocity(this.smallDeltaStep.tick*this.direction=="down"?1:-1),this.smallDeltaStep.sum=0)):this.addVelocity(.1*t.deltaY)}}],e&&E(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T(r.key),r)}}function A(t,e,n){return e&&x(t.prototype,e),n&&x(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function T(t){var e=function(t,e){if("object"!=O(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}var P=function(){return A((function t(){j(this,t),this.default_focusuable=null,this.focused_module_ref=null,this.options={redirect:null}}),[{key:"setApp",value:function(t){this.app=t}},{key:"getFocusedModule",value:function(){var t,e=null===(t=this.focused_module_ref)||void 0===t?void 0:t.deref();return e?!(null!=e&&e.__focusable__)instanceof L?(raise("Module THAT IS FOCUSED is not focusable class."),null):e:null}},{key:"setRedirection",value:function(t){this.options.redirect=t}},{key:"setFocus",value:function(t){var e,n,r,o=this.getFocusedModule();if(o&&(null===(e=o.__unFocus__)||void 0===e||e.call(o)),null===t&&(t=this.default_focusuable),!t.__focusable__)throw new Error("Module is not focusable class.");t=t.__focusable__.redirect(),this.focused_module_ref=new WeakRef(t),null===(n=(r=t).__focus__)||void 0===n||n.call(r)}}])}(),L=function(){return A((function t(e){j(this,t),this.module=e,this.focused=!1,this.redirect_to=null}),[{key:"redirect",value:function(){var t;return(null===(t=this.redirect_to)||void 0===t?void 0:t.deref())||this.module}},{key:"setRedirection",value:function(t){t||(this.redirect_to=null),this.redirect_to=new WeakRef(t)}},{key:"focus",value:function(){this.focused=!0}},{key:"unFocus",value:function(){this.focused=!1}}])}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function M(){M=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new P(r||[]);return o(a,"_invoke",{value:j(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(L([])));E&&E!==n&&r.call(E,a)&&(w=E);var S=g.prototype=m.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,a,u){var s=f(t[o],t,i);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==C(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,n,r){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var s=x(u,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?v:p,c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function x(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(C(e)+" is not iterable")}return b.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},_(O.prototype),c(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(S),c(S,s,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}function R(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D(r.key),r)}}function I(t,e,n){return(e=D(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D(t){var e=function(t,e){if("object"!=C(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==C(e)?e:e+""}function B(t){return t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),!1}var F=function(){return t=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.app,i=r.special_query_func;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),I(this,"on",(function(t){return new Proxy(e.events,{get:function(n,r){return e.customEventHandlers(t,r)}})})),I(this,"moveTripper",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.startX,r=t.startY,o=t.deadzone,i=void 0===o?e.moveTripperDist:o,a=t.move_fuse,u=void 0===a?e.returnFuse():a,s=function(t){return Math.hypot(t.clientX-n,t.clientY-r)>i&&u.True(),u.true};return document.addEventListener("pointermove",s),document.addEventListener("pointerup",(function(){document.removeEventListener("pointermove",s)}),{once:!0}),{move_fuse:u,check:s}})),this.app=o,this.special_query_func=i,this.focus=new P,this.listenToController=!1,this.enabledDefaults=["Tab","Esc","F5","F11","F12","KeyI","KeyC","KeyV","KeyX"],document.addEventListener("keypress",(function(t){return e.focusKeyEvent("keypress",t)})),document.addEventListener("keydown",(function(t){return e.focusKeyEvent("keydown",t)})),document.addEventListener("keyup",(function(t){return e.focusKeyEvent("keyup",t)})),this.activeEvents=new dt,this.openModals=new dt,this.events=["click","rightclick","pointerdown","pointerup","pointermove","pointerdownmoveup","pointerdown","dragstart","clickone","clickortwo","wheel"],document.addEventListener("click",(function(t){return!e.beforePointerEvent("default-click",t)&&B(t)})),this.mouse={x:0,y:0,pointerDown:!1},document.addEventListener("pointermove",(function(t){return e.mouse.x=t.clientX,e.mouse.y=t.clientY})),document.addEventListener("pointerdown",(function(t){return e.mouse.x=t.clientX,e.mouse.y=t.clientY,e.mouse.pointerDown=!0})),document.addEventListener("pointerup",(function(t){return e.mouse.pointerDown=!1})),document.addEventListener("pointerleave",(function(t){return e.mouse.pointerDown=!1})),document.addEventListener("contextmenu",(function(t){return!!t.shiftKey||!yt(t,"[context-menuable]")&&void B(t)})),this.on(document).dragstart((function(t){})),this.clickOrTwoWindowMs=350,this.moveTripperDist=13,this.mobilePressHoldDelay=550,this.backHandler=new w(this),this.backHandler.on((function(t){return e.processModalEvent()}),{weight:1e3}),this.fn=n},e=[{key:"setupMomentumScroll",value:function(t){return new _(this,t)}},{key:"clearAllSelections",value:function(){window.getSelection().removeAllRanges()}},{key:"beforePointerEvent",value:function(t,e){switch(t){case"default-click":return!e.pointerType||e.target.matches&&e.target.matches("[click-enabled]");case"pointerdown":case"dragstart":if(e.target.matches&&e.target.matches("[prevent-event]"))return!0;if(e.target.matches&&e.target.matches("a,[pass-event], [click-enabled]"))return!1;case"pointerdownmoveup":case"pointerdown":case"dragstart":case"custom-click":case"clickone":case"clickortwo":if(this.processModalEvent(e))return!1;default:return!0}}},{key:"nullAllEvents",value:function(){var t=this;this.activeEvents.forEach((function(e){return e.False()+t.activeEvents.removeRef(e)}))}},{key:"kingOfTheStack",value:function(t){var e=this;this.activeEvents.forEach((function(n){return n!==t&&n.False()+e.activeEvents.removeRef(n)}))}},{key:"customEventHandlers",value:function(t,e){var n=this;switch(e.toLowerCase()){case"pointerdownmoveup":return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return f.bind(n).apply(void 0,[t].concat(r))};case"clickone":return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return h.bind(n).apply(void 0,[t].concat(r))};case"clickortwo":return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return p.bind(n).apply(void 0,[t].concat(r))};case"rightclick":return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return y.bind(n).apply(void 0,[t].concat(r))};case"wheel":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.onWheel,r=e.capture,o=void 0!==r&&r,i=e.passive,a=void 0!==i&&i;t.addEventListener("wheel",(function(t){n({whl_e:t,killPropagation:function(){return t.stopPropagation()&&t.stopImmediatePropagation()},pathContains:function(e){return yt(t,e)}})}),{capture:o,passive:a})};case"pointerdown":case"pointerup":case"click":case"dragstart":return function(r){t.addEventListener(e,(function(t){var o=n.beforePointerEvent(e,t);r(t,o)}))};case"click":return function(e){t.setAttribute("click-enabled",""),t.addEventListener("pointerdown",(function(r){if(!n.beforePointerEvent("custom-click",r))return B(r);t.addEventListener("click",(function(t){e(t)}),{once:!0})}))}}}},{key:"processModalEvent",value:function(t){var e=this.openModals.getRefs();return e.length<0||e.length>0&&(!t||!yt(t,"[zyx-input-modal]"))&&(e.forEach((function(t){return t.clickedOutside(t)})),this.nullAllEvents(),t.stopPropagation(),t.stopImmediatePropagation(),this.openModals.clear(),!0)}},{key:"isolateEventWithinContainer",value:function(t,e){var n=e.clickedOutside;e.connected,this.openModals.add(t),t.setAttribute("zyx-input-modal",""),t.clickedOutside=n.bind(t)}},{key:"socketXinputEvent",value:function(t){if(this.listenToController){var e=1===t.pressed?"keydown":"keyup";this.focusKeyEvent(e,{joy:!0,key:o[t.button]})}}},{key:"queryApplication",value:function(t){return this.special_query_func?this.special_query_func(t):document.querySelectorAll(t)}},{key:"focusKeyEvent",value:(r=M().mark((function t(e,n){var r,o,i;return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(this.queryApplication("input:focus,textarea:focus,.ql-editor:focus").length>0)){t.next=4;break}return t.abrupt("return",!1);case 4:if(!n.ctrlKey&&!n.metaKey){t.next=6;break}return t.abrupt("return",!1);case 6:if(null===(r=this.app)||void 0===r||null===(o=r.keyEvent)||void 0===o||o.call(r,e,n),"function"==typeof(null==(i=this.focus.getFocusedModule())?void 0:i.keyEvent)){t.next=10;break}return t.abrupt("return",!1);case 10:return!n.joy&&!this.enabledDefaults.includes(n.code)&&this.queryApplication("input:focus").length<1&&(n.preventDefault(),n.stopPropagation()),t.next=13,null==i?void 0:i.keyEvent(e,n);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.error("Key Event Error",t.t0,"Additional Context",{event:e,e:n});case 18:case"end":return t.stop()}}),t,this,[[0,15]])})),i=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){R(i,n,o,a,u,"next",t)}function u(t){R(i,n,o,a,u,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})},{key:"simpleMoveTripper",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startX,n=t.startY,r=t.deadzone,o=void 0===r?this.moveTripperDist:r,i=t.move_fuse,a=void 0===i?this.returnFuse():i;return{move_fuse:a,check:function(t){return Math.hypot(t.clientX-e,t.clientY-n)>o&&a.True(),a.true}}}},{key:"returnFuse",value:function(t){return{true:!!t,false:!t,True:function(){return this.true=!0,this.false=!1,this},False:function(){return this.true=!1,this.false=!0,this},reset:function(t){return this.true=!1,"function"==typeof t&&t(),this},falseTrue:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return this.true?e.apply(void 0,r):t.apply(void 0,r),this}}}}],e&&N(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,i}();function z(t){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Y(r.key),r)}}function Y(t){var e=function(t,e){if("object"!=z(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==z(e)?e:e+""}var W=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.keyname=e,this.type=n,this.node=r,this.setType="textContent",this.value=this.setValue(r.textContent)},(e=[{key:"set",value:function(t){return null==this.setValue(t)||this.updateNode(),!0}},{key:"setValue",value:function(t){if(t===this.value)return!1;if(z(t)===this.type)return this.value=t;switch(this.type){case"number":return this.value=Number(t);case"string":return this.value="".concat(t)}return!0}},{key:"updateNode",value:function(){switch(this.setType){case"textContent":this.node.textContent=this.value;break;case"HTML":this.node.innerHTML=this.value}}}])&&q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function H(t,e){t.hasOwnProperty(e)||(t[e]={})}var V="x0k8-zyxph-a9n3";function G(t){return"<".concat(V," id='").concat(t,"'></").concat(V,">")}function K(t){var e=t.match(/id='(.*?)'/);return(null==e?void 0:e.length)>0?e[1]:null}function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ot(r.key),r)}}function J(){return J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},J.apply(this,arguments)}function Q(t){var e="function"==typeof Map?new Map:void 0;return Q=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(tt())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&et(o,n.prototype),o}(t,arguments,nt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),et(n,t)},Q(t)}function tt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tt=function(){return!!t})()}function et(t,e){return et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},et(t,e)}function nt(t){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nt(t)}function rt(t,e,n){return(e=ot(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ot(t){var e=function(t,e){if("object"!=$(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$(e)?e:e+""}function it(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=st(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function at(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||st(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t){return function(t){if(Array.isArray(t))return ct(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||st(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(t,e){if(t){if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(t,e):void 0}}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lt(t,e,n){try{ut(t.querySelectorAll(e)).forEach((function(t){return n(t)}))}catch(t){throw console.error(t),t}}function ft(t,e){try{for(var n=0,r=Object.entries(e);n<r.length;n++){var o=at(r[n],2),i=o[0],a=o[1];t.style.setProperty(i,a)}}catch(t){throw console.error(t),t}}function ht(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.cooldown,n=void 0===e?60:e,r=t.last;return function(){return!(performance.now()-r<n||(r=performance.now(),0))}}function pt(t,e){var n,r=it(t.path||t.composedPath&&t.composedPath());try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o===document)return!1;if("string"==typeof e&&o.matches(e))return o;if(o===e)return o}}catch(t){r.e(t)}finally{r.f()}return!1}function yt(t,e){return(t.path||t.composedPath&&t.composedPath()).some((function(t){var n;return null===(n=t.matches)||void 0===n?void 0:n.call(t,e)}))}function vt(t,e){var n={active:null};t.addEventListener("pointerup",(function(t){return n.active=!1})),t.addEventListener("pointerdown",(function(t){n.active=!0,e(t)})),t.addEventListener("pointermove",(function(t){n.active&&e(t)}))}var dt=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return rt(t=function(t,e,n){return e=nt(e),function(t,e){if(e&&("object"===$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tt()?Reflect.construct(e,n||[],nt(t).constructor):e.apply(t,n))}(this,e,[].concat(r)),"getRefs",t.get),rt(t,"delete",t.removeRef),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&et(t,e)}(e,Q(Set)),n=e,r=[{key:"add",value:function(t){J(nt(e.prototype),"add",this).call(this,new WeakRef(t))}},{key:"push",value:function(t){J(nt(e.prototype),"add",this).call(this,new WeakRef(t))}},{key:"forEach",value:function(t){var e,n=it(this.get());try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(t){n.e(t)}finally{n.f()}}},{key:"removeRef",value:function(t){for(var e=0,n=ut(this.values());e<n.length;e++){var r=n[e];if(r.deref()===t)return this.delete(r),!0}}},{key:"get",value:function(){var t=this;return ut(this.values()).map((function(e){var n=e.deref();return void 0!==n?n:(t.delete(e),!1)})).filter((function(t){return t}))}},{key:"clear",value:function(){J(nt(e.prototype),"clear",this).call(this)}}],r&&Z(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}();function mt(){return mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},mt.apply(this,arguments)}function bt(t){var e="function"==typeof Map?new Map:void 0;return bt=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return wt(t,arguments,gt(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Et(n,t)},bt(t)}function gt(t){return gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gt(t)}function wt(t,e,n){if(kt())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Et(o,n.prototype),o}function kt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kt=function(){return!!t})()}function Et(t,e){return Et=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Et(t,e)}function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function _t(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ot(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ot(t,e){if(t){if("string"==typeof t)return jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(t,e):void 0}}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function At(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pt(r.key),r)}}function Tt(t,e,n){return e&&At(t.prototype,e),n&&At(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pt(t){var e=function(t,e){if("object"!=St(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=St(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==St(e)?e:e+""}function Lt(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function Ct(t,e){return t.get(Rt(t,e))}function Mt(t,e,n){return t.set(Rt(t,e),n),n}function Rt(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}var Nt=new WeakMap,It=new WeakMap,Dt=new WeakMap,Bt=new WeakMap,Ft=new WeakMap,zt=new WeakMap,qt=new WeakMap,Yt=new WeakMap,Wt=function(){return Tt((function t(){var e,n,r,o=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.container,u=void 0===a?u:a,s=i.array,c=void 0===s?null:s,l=i.compose,f=void 0===l?null:l,h=i.debounce,p=void 0===h?0:h,y=i.range,v=void 0===y?null:y,d=i.after,m=void 0===d?null:d;if(xt(this,t),Lt(this,Nt,void 0),Lt(this,It,void 0),Lt(this,Dt,void 0),Lt(this,Bt,void 0),Lt(this,Ft,new WeakMap),Lt(this,zt,void 0),Lt(this,qt,void 0),Lt(this,Yt,null),e=this,r=function(){if(Ct(zt,o)<=0)return o.update();Ct(Yt,o)&&clearTimeout(Ct(Yt,o)),Mt(Yt,o,setTimeout((function(){Mt(Yt,o,null),o.update()}),Ct(zt,o)))},(n=Pt(n="arrayModified"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,!(c instanceof Ht))throw new Error("zyXDomArray target must be zyXArray");Mt(Nt,this,u),u.__zyXArray__=this,Mt(Dt,this,f),Mt(Bt,this,m),Mt(It,this,c),Mt(qt,this,v),Mt(zt,this,p),Ct(It,this).addListener(this.arrayModified),this.update()}),[{key:"forEach",value:function(t){var e,n=_t(this.entries());try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(t){n.e(t)}finally{n.f()}}},{key:"entries",value:function(){var t,e=this;return(t=Ct(Nt,this).children,function(t){if(Array.isArray(t))return jt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ot(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){return[t,Ct(Ft,e).get(t)]}))}},{key:"get",value:function(t){return Ct(Ft,this).get(t)}},{key:"getTarget",value:function(){var t=Object.values(Ct(It,this));return null!==Ct(qt,this)&&t.length>Math.abs(Ct(qt,this))?Ct(qt,this)<0?t.slice(t.length+Ct(qt,this),t.length):t.slice(0,Ct(qt,this)):t}},{key:"createCompose",value:function(t){var e;if(!Ct(Dt,this))return t;for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return"object"===St(Ct(Dt,this).prototype)?wt(Ct(Dt,this),[t].concat(r)):(e=Ct(Dt,this)).call.apply(e,[this,t].concat(r))}},{key:"update",value:function(){Ct(Nt,this).innerHTML="";var t,e,n=this.getTarget(),r={item:null,element:null},o=0,i=_t(n);try{for(i.s();!(t=i.n()).done;){var a=t.value,u=n[o+1],s=(e=this.createCompose(a,{prev:r,next:u,index:o}))instanceof xe?e.markup():null!=e&&e.__ZyXHtml__?e.__ZyXHtml__.markup():void 0;if(s instanceof HTMLTemplateElement||s instanceof DocumentFragment)throw Error("cannot associate reactive object with a template element");Ct(Nt,this).append(s),Ct(Ft,this).set(s,a),"symbol"!==St(a)&&"object"!==St(a)||Ct(Ft,this).set(a,s),r.item=a,r.element=s,o++}}catch(t){i.e(t)}finally{i.f()}Ct(Bt,this)&&Ct(Bt,this).call(this)}}])}();var Ut,Xt=new WeakMap,Ht=function(t){function e(){var t;xt(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Lt(t=function(t,e,n){return e=gt(e),function(t,e){if(e&&("object"===St(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kt()?Reflect.construct(e,n||[],gt(t).constructor):e.apply(t,n))}(this,e,[].concat(r)),Xt,new dt),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Et(t,e)}(e,bt(Array)),Tt(e,[{key:"addListener",value:function(t){Ct(Xt,this).add(t)}},{key:"removeListener",value:function(t){Ct(Xt,this).delete(t)}},{key:"clear",value:function(){var t=this;mt(gt(e.prototype),"splice",this).call(this,0,this.length),Ct(Xt,this).forEach((function(e){return e(t,"clear")}))}},{key:"push",value:function(){for(var t,n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(t=mt(gt(e.prototype),"push",this)).call.apply(t,[this].concat(o)),Ct(Xt,this).forEach((function(t){return t.apply(void 0,[n,"push"].concat(o))}))}},{key:"pop",value:function(){for(var t,n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(t=mt(gt(e.prototype),"pop",this)).call.apply(t,[this].concat(o)),Ct(Xt,this).forEach((function(t){return t.apply(void 0,[n,"pop"].concat(o))}))}},{key:"shift",value:function(){for(var t,n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(t=mt(gt(e.prototype),"shift",this)).call.apply(t,[this].concat(o)),Ct(Xt,this).forEach((function(t){return t.apply(void 0,[n,"shift"].concat(o))}))}},{key:"unshift",value:function(){for(var t,n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(t=mt(gt(e.prototype),"unshift",this)).call.apply(t,[this].concat(o)),Ct(Xt,this).forEach((function(t){return t.apply(void 0,[n,"unshift"].concat(o))}))}},{key:"splice",value:function(){for(var t,n=this,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];(t=mt(gt(e.prototype),"splice",this)).call.apply(t,[this].concat(o)),Ct(Xt,this).forEach((function(t){return t.apply(void 0,[n,"splice"].concat(o))}))}}])}();function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function Gt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||Jt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $t(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Jt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Zt(t){return function(t){if(Array.isArray(t))return Qt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Jt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e){if(t){if("string"==typeof t)return Qt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qt(t,e):void 0}}function Qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var te={"zyx-click":function(t){var e=t.node,n=t.data;return e.addEventListener("click",n.value)},"zyx-dblclick":function(t){var e=t.node,n=t.data;return e.addEventListener("dblclick",n.value)},"zyx-mousedown":function(t){var e=t.node,n=t.data;return e.addEventListener("mousedown",n.value)},"zyx-mouseup":function(t){var e=t.node,n=t.data;return e.addEventListener("mouseup",n.value)},"zyx-mouseover":function(t){var e=t.node,n=t.data;return e.addEventListener("mouseover",n.value)},"zyx-mousemove":function(t){var e=t.node,n=t.data;return e.addEventListener("mousemove",n.value)},"zyx-mouseout":function(t){var e=t.node,n=t.data;return e.addEventListener("mouseout",n.value)},"zyx-mouseenter":function(t){var e=t.node,n=t.data;return e.addEventListener("mouseenter",n.value)},"zyx-mouseleave":function(t){var e=t.node,n=t.data;return e.addEventListener("mouseleave",n.value)},"zyx-keydown":function(t){var e=t.node,n=t.data;return e.addEventListener("keydown",n.value)},"zyx-keypress":function(t){var e=t.node,n=t.data;return e.addEventListener("keypress",n.value)},"zyx-keyup":function(t){var e=t.node,n=t.data;return e.addEventListener("keyup",n.value)},"zyx-focus":function(t){var e=t.node,n=t.data;return e.addEventListener("focus",n.value)},"zyx-blur":function(t){var e=t.node,n=t.data;return e.addEventListener("blur",n.value)},"zyx-submit":function(t){var e=t.node,n=t.data;return e.addEventListener("submit",n.value)},"zyx-load":function(t){var e=t.node,n=t.data;return e.addEventListener("load",n.value)},"zyx-error":function(t){var e=t.node,n=t.data;return e.addEventListener("error",n.value)},"zyx-input":function(t){var e=t.node,n=t.data;return e.addEventListener("input",n.value)},"zyx-change":function(t){var e=t.node,n=t.data;return e.addEventListener("change",n.value)},"zyx-scroll":function(t){var e=t.node,n=t.data;return e.addEventListener("scroll",n.value)},"zyx-array":function(t){var e=t.node,n=t.data;return new Wt(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kt(Object(n),!0).forEach((function(e){var r,o,i;r=t,o=e,i=n[e],o=function(t){var e=function(t,e){if("object"!=Vt(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vt(e)?e:e+""}(o),o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({container:e},n.value))},"zyx-pointerdown":function(t){var e=t.node,n=t.data;return e.addEventListener("pointerdown",n.value)},"zyx-pointermove":function(t){var e=t.node,n=t.data;return e.addEventListener("pointermove",n.value)},"zyx-pointerup":function(t){var e=t.node,n=t.data;return e.addEventListener("pointerup",n.value)},"zyx-pointerover":function(t){var e=t.node,n=t.data;return e.addEventListener("pointerover",n.value)},"zyx-pointerout":function(t){var e=t.node,n=t.data;return e.addEventListener("pointerout",n.value)},"zyx-pointerenter":function(t){var e=t.node,n=t.data;return e.addEventListener("pointerenter",n.value)},"zyx-pointerleave":function(t){var e=t.node,n=t.data;return e.addEventListener("pointerleave",n.value)},"zyx-pointercancel":function(t){var e=t.node,n=t.data;return e.addEventListener("pointercancel",n.value)},"zyx-click-pop":function(t){var e=t.node;t.data,e.addEventListener("pointerdown",(function(t){var n,r,o=e.getBoundingClientRect(),i=o.width*((t.clientX-o.x)/o.width),a=o.height*((t.clientY-o.y)/o.height);ve(Ut||(n=['\n\t\t\t<div class="zyx-expand_circle_ctn" this=ctn>\n\t\t\t\t<div class="zyx-expand_circle" this=circle></div>\n\t\t\t</div>\n\t\t'],r||(r=n.slice(0)),Ut=Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(r)}})))).const().appendTo(e).pass((function(t){console.log("touch",t),t.circle.style.left=i+"px",t.circle.style.top=a+"px",t.circle.addEventListener("animationend",(function(){t.ctn.remove()}))}))}))},"zyx-uplate":function(t){var e=t.node,n=t.data;e.templates={},e.active_template="default",e.add=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.template_name,r=t.template,o=t.carry_values;if(n in e.templates)return e;e.templates[n]={fragments:{},values:{}};var i=e.templates[n],a=e.templates[e.active_template];o&&a.values&&Object.assign(i.values,a.values),i.template=r;var u=r.match(/{([a-z0-9]*?){(.*?)}}/gm);if(u){var s,c=$t(u);try{var l=function(){var t=s.value,e=Gt(/{([a-z0-9]*?){(.*?)}}/gm.exec(t),3),n=e[0],r=e[1],o=e[2];o&&(i.values[r]=o),i.fragments[n]=function(){return i.values[r]}};for(c.s();!(s=c.n()).done;)l()}catch(t){c.e(t)}finally{c.f()}}return e},e.switch=function(t){return e.active_template=t,e.flash(),e},e.flash=function(t){var n=e.templates[e.active_template],r="".concat(n.template);t&&Object.assign(n.values,t);for(var o=0,i=Object.entries(n.fragments);o<i.length;o++){var a=Gt(i[o],2),u=a[0],s=a[1];r=r.replace(u,s())}return e.innerHTML=r,e},e.add({template_name:"default",template:e.innerHTML}).flash(n)}},ee="[".concat(Object.keys(te).join("],["),"]");function ne(t){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ne(t)}function re(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||ie(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(t){return function(t){if(Array.isArray(t))return ae(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ie(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(t,e){if(t){if("string"==typeof t)return ae(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(t,e):void 0}}function ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,se(r.key),r)}}function se(t){var e=function(t,e){if("object"!=ne(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ne(e)?e:e+""}function ce(t,e,n){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.set(t,n)}function le(t,e){return t.get(he(t,e))}function fe(t,e,n){return t.set(he(t,e),n),n}function he(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function pe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pe=function(){return!!t})()}function ye(t,e){return ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ye(t,e)}function ve(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(t,e,n){if(pe())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&ye(o,n.prototype),o}(xe,[t].concat(n))}var de,me,be,ge=new WeakMap,we=new WeakMap,ke=new WeakMap,Ee=new WeakMap,Se=new WeakMap,_e=new WeakMap,Oe=new WeakMap,je=new WeakMap,xe=function(){return t=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ce(this,ge,!1),ce(this,we,void 0),ce(this,ke,void 0),ce(this,Ee,void 0),ce(this,Se,void 0),ce(this,_e,{}),ce(this,Oe,void 0),ce(this,je,void 0);for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];fe(Ee,this,function(t){for(var e={},n=0,r=Object.entries(t);n<r.length;n++){var o=re(r[n],2),i=o[0],a=o[1],u=ne(a),s=!("string"===u||"number"===u);e[i]=""!==a&&a?{type:u,value:a,placeholder:s?G(i):a}:{placeholder:""}}return e}(o));var a=String.raw.apply(String,[{raw:e}].concat(oe(Object.values(le(Ee,this)).map((function(t){return t.placeholder})))));fe(ke,this,function(t){var e=document.createElement("div");return e.innerHTML=t,e}(a)),function(t){for(var e=t.childNodes,n=0;n<2;n++)e[n]&&3===e[n].nodeType&&""===e[n].textContent.trim()&&t.removeChild(e[n])}(le(ke,this)),fe(je,this,new Proxy(this,{get:function(t,e){return n.hasOwnProperty(e)?n[e]:le(_e,n).hasOwnProperty(e)?le(_e,n)[e].value:t[e]},set:function(t,e,r){return le(_e,n).hasOwnProperty(e)?le(_e,n)[e].set(r):t[e]=r}}))},e=[{key:"bind",value:function(t){var e=this;return fe(Oe,this,t),t.proxy=le(je,this),t.__ZyXHtml__=this,t.appendTo=function(t){return e.appendTo(t)},t.prependTo=function(t){return e.prependTo(t)},t.place=function(t){return e.place(t)},this.const()}},{key:"const",value:function(){var t,e,n,r,o,i,a=this;return le(ge,this)||(t=le(ke,this),e=le(Ee,this),Zt(new Set(t.querySelectorAll(ee))).forEach((function(t){var n,r=Zt(t.attributes).filter((function(t){return t.name.startsWith("zyx-")})),o=r.filter((function(t){return t.name in te})),i=$t(o);try{for(i.s();!(n=i.n()).done;){var a=n.value,u=K(a.value);u?(te[a.name]({node:t,data:e[u]}),t.removeAttribute(a.name)):te[a.name]({node:t,data:a.value})}}catch(t){i.e(t)}finally{i.f()}})),function(t,e){try{for(var n=0,r=oe(t.querySelectorAll(V));n<r.length;n++){var o=r[n];o.replaceWith(Ae(e[o.id].value))}var i=t.innerHTML.match(G("(.*?)"));if(i){var a,u=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ie(t))){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(i);try{for(u.s();!(a=u.n()).done;){var s=e[K(a.value)],c=s.placeholder,l=s.value;t.innerHTML=t.innerHTML.replace(c,l)}}catch(t){u.e(t)}finally{u.f()}}}catch(n){throw console.log({markup:t,templateData:e}),n}}(le(ke,this),le(Ee,this)),oe(le(ke,this).querySelectorAll("ph")).forEach((function(t){var e=oe(t.attributes)[0].nodeName;t.setAttribute("ph",e),a.thisAssigner(t,e)})),oe(le(ke,this).querySelectorAll("[pr0x]")).forEach((function(t){t.__key__=t.getAttribute("pr0x"),le(_e,a)[t.__key__]=new W(t.__key__,"string",t)})),oe(le(ke,this).querySelectorAll("[zyx-proxy]")).forEach((function(t){t.proxy=le(je,a)})),oe(le(ke,this).querySelectorAll("[this]")).forEach((function(t){a.thisAssigner(t,t.getAttribute("this")),t.removeAttribute("this")})),oe(le(ke,this).querySelectorAll("[push]")).forEach((function(t){a.pushAssigner(t,t.getAttribute("push")),t.removeAttribute("push")})),fe(we,this,le(ke,this).childNodes.length>1?(n=le(ke,this),(r=(o=document.createElement("template")).content).append.apply(r,function(t){if(Array.isArray(t))return X(t)}(i=n.childNodes)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(t,e){if(t){if("string"==typeof t)return X(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(t,e):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o):le(ke,this)),fe(Se,this,le(we,this)instanceof HTMLTemplateElement),le(Se,this)?fe(we,this,le(we,this).content):fe(we,this,le(we,this).firstElementChild),fe(ge,this,!0)),this}},{key:"markup",value:function(){return le(we,this.const())}},{key:"appendTo",value:function(t){return t.append(this.markup()),this}},{key:"prependTo",value:function(t){return t.prepend(this.markup()),this}},{key:"place",value:function(t){return function(t,e){if("object"===U(e))return e.replaceWith(t);var n=document.querySelector("ph[".concat(e,"]"));if(!n)throw new Error(e,"not found");n.replaceWith(t)}(this.markup(),t),this}},{key:"touch",value:function(t){return t({proxy:le(je,this),markup:this.markup()}),this}},{key:"pass",value:function(t){return this.const()&&t(this),this}},{key:"thisAssigner",value:function(t,e){var n=e.split(" ");if(1===n.length){var r=n[0];return t.__key__=r,this[r]=t,void(le(Oe,this)&&(le(Oe,this)[r]=t))}var o=re(n,2),i=o[0],a=o[1];H(this,i),this[i][a]=t,le(Oe,this)&&(H(le(Oe,this),i),le(Oe,this)[i][a]=t),t.__group__=i,t.__key__=a}},{key:"pushAssigner",value:function(t,e){this.hasOwnProperty(e)||(this[e]=[],le(Oe,this)&&(le(Oe,this)[e]=this[e])),t.__key__=e,this[e].push(t)}}],e&&ue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Ae(t){return t?Array.isArray(t)?(n=t,o=document.createElement("template"),(r=o.content).append.apply(r,oe((e=n,e.map(Ae)))),o).content:"function"==typeof t?Ae(t()):null!=t&&t.__ZyXHtml__?t.__ZyXHtml__.markup():t instanceof xe?t.markup():t instanceof HTMLTemplateElement?t.content:t:"";var e,n,r,o}function Te(t){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(t)}function Pe(){Pe=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new P(r||[]);return o(a,"_invoke",{value:j(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(L([])));E&&E!==n&&r.call(E,a)&&(w=E);var S=g.prototype=m.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,a,u){var s=f(t[o],t,i);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==Te(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,n,r){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var s=x(u,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?v:p,c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function x(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Te(e)+" is not iterable")}return b.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},_(O.prototype),c(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(S),c(S,s,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}function Le(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Me(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function Re(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ie(r.key),r)}}function Ie(t){var e=function(t,e){if("object"!=Te(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Te(e)?e:e+""}var De=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).root;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ve(de||(de=Re(["\n\t\t\t<styles this=styles></styles>\n\t\t"]))).bind(this),e&&this.appendTo(e)}return e=t,n=[{key:"loadUrl",value:function(t){var e=this;return new Promise((function(n,r){ve(me||(me=Re(['<link rel="stylesheet" type="text/css" this=link href="','">'])),t).appendTo(e.styles).pass((function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).link;t.onload=function(){return n({link:t,cleanuUp:function(){return t.remove()}})},t.onerror=r}))}))}},{key:"str",value:(r=Pe().mark((function t(e){var n,r,o,i,a,u,s,c,l=arguments;return Pe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=l.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=l[o];if(i=String.raw.apply(String,[e].concat(r)),!String(i).startsWith("url(")){t.next=22;break}a=i.split("url(").slice(1).map((function(t){return t.split(")")[0]})),u=Le(a),t.prev=5,u.s();case 7:if((s=u.n()).done){t.next=13;break}return c=s.value,t.next=11,this.loadUrl(c);case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),u.e(t.t0);case 18:return t.prev=18,u.f(),t.finish(18);case 21:return t.abrupt("return");case 22:return t.abrupt("return",ve(be||(be=Re(["\n\t\t\t<style this=style></style>\n\t\t"]))).appendTo(this.styles).pass((function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).style.innerHTML=i})));case 23:case"end":return t.stop()}}),t,this,[[5,15,18,21]])})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){Me(i,n,o,a,u,"next",t)}function u(t){Me(i,n,o,a,u,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})},{key:"cloneType",value:function(e){return new t({root:e})}}],n&&Ne(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r,o}(),Be=new De({root:"undefined"!=typeof document&&document.head}),Fe=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Be.str.apply(Be,[t].concat(n))};function ze(t,e){return fetch(t,{headers:new Headers({"Content-Type":"application/json"}),method:"POST",credentials:"include",body:JSON.stringify(e)})}function qe(t){return fetch(t,{headers:new Headers({"Content-Type":"application/json"}),method:"GET",credentials:"include"})}function Ye(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=function(){200===r.status?e(r.response):n(new Error("Image loading error"))},r.send()}))}function We(t,e){return Math.max(0,(-e+t)/(1-e))}function Ue(t,e){return Math.min(1,t/e)}function Xe(t){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(t)}function He(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$e(r.key),r)}}function Ke(t,e,n){return e&&Ge(t.prototype,e),n&&Ge(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $e(t){var e=function(t,e){if("object"!=Xe(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xe(e)?e:e+""}function Ze(t){return new Promise((function(e,n){return setTimeout(e,t)}))}var Je=function(){return Ke((function t(){var e,n,r,o=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.url,u=i.type,s=void 0===u?"module":u;Ve(this,t),e=this,r=function(t){if("event"in t.data)return o.callCallback(t.data);var e=t.data,n=e.taskID,r=e.reject,i=o.serviceWorkerTasks[n];if(delete o.serviceWorkerTasks[n],r)return i.reject(r);null==i||i.resolve(t.data)},(n=$e(n="serviceWorkerResponse"))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,this.sW=new Worker(a,{type:s}),this.serviceWorkerTasks={},this.sW.onmessage=this.serviceWorkerResponse,this.callbacks={}}),[{key:"on",value:function(t,e){t in this.callbacks||(this.callbacks[t]=[]),this.callbacks[t].push(e)}},{key:"callCallback",value:function(t){var e=this.callbacks[t.event];if(e){var n,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return He(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(e);try{for(r.s();!(n=r.n()).done;)(0,n.value)(t.data)}catch(t){r.e(t)}finally{r.f()}}}},{key:"task",value:function(t){var e=this,n=t.task,r=t.data;return new Promise((function(t,o){var i=Math.random().toString(36).slice(2,10),a={task:n,taskID:i,resolve:t,reject:o};e.serviceWorkerTasks[i]=a,e.sW.postMessage({task:n,data:r,taskID:i})}))}}])}(),Qe=Ke((function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.delay,o=void 0===r?1:r,i=n.microtask,a=void 0!==i&&i;Ve(this,t),"function"==typeof this.asynConstructor?a?queueMicrotask((function(t){return e.asynConstructor()})):setTimeout((function(t){return e.asynConstructor()}),o):console.warn("you are using a (new AsynConstructor()) class without an async asynConstructor method.")}));function tn(t){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tn(t)}function en(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nn(r.key),r)}}function nn(t){var e=function(t,e){if("object"!=tn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=tn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tn(e)?e:e+""}var rn=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"get",value:function(t,e){var n=t+"=",r=decodeURIComponent(document.cookie),o=r.split(";");if(!r.includes(t))return this.set(t,e),e;for(var i in o){for(var a=o[i];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(n)){var u=a.substring(n.length,a.length);return"true"===u||"false"===u?"true"===u:u}}return""}},{key:"set",value:function(t,e,n){var r=new Date;n?r.setTime(r.getTime()+24*n*60*60*1e3):r.setTime(r.getTime()+8639136e5);var o="expires="+r.toUTCString();document.cookie="".concat(t,"=").concat(e,";").concat(o,";path=/")}},{key:"delete",value:function(t){console.log("deleting cookie",t),this.set(t,"",-1)}}],e&&en(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const on=new rn;function an(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return un(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?un(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function un(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var sn=new WeakMap;"undefined"!=typeof window&&(window.zyxMap=sn);var cn,ln,fn=function(t,e){var n=sn.get(t);return n||(sn.set(t,{banks:{}}),n=sn.get(t)),e in n.banks||(n.banks[e]={}),n.banks[e]};function hn(t,e){var n=fn(t,"delayChains");if(e in n){var r,o=an(n[e].pending);try{for(o.s();!(r=o.n()).done;){var i=r.value;clearTimeout(i)}}catch(t){o.e(t)}finally{o.f()}n[e].pending=[],n[e].callbacks=[]}else n[e]={callbacks:[],pending:[]};var a=function(){return n[e].callbacks.length>0&&n[e].callbacks.splice(0,1)[0]()};return n[e].pending.push(setTimeout(a,1)),function t(){return{then:function(r,o){return n[e].callbacks.push((function(){n[e].pending.push(setTimeout((function(t){r(),a()}),o))})),t()}}}()}function pn(t,e){var n=fn(t,"delayChains");if(e in n){var r,o=an(n[e].pending);try{for(o.s();!(r=o.n()).done;){var i=r.value;clearTimeout(i)}}catch(t){o.e(t)}finally{o.f()}n[e]={callbacks:[],pending:[]}}}function yn(t,e,n,r){return new Promise((function(o,i){var a=fn(t,"delays");e in a&&clearTimeout(a[e]),n=n||0,a[e]=r?setTimeout((function(){return o(r())}),n):setTimeout(o,n)}))}function vn(t){for(var e=fn(t,"delays"),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(r.length>1)for(var i in r)i in e&&clearTimeout(e[i]);else clearTimeout(e[r[0]])}function dn(t,e,n,r){var o=fn(t,"debouncers");if(e in o)o[e](n);else{try{n(),n=null}catch(t){throw new Error(t)}setTimeout((function(t){try{n&&n()}catch(t){throw new Error(t)}delete o[e]}),r),o[e]=function(t){return n=t}}}function mn(t){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mn(t)}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gn(r.key),r)}}function gn(t){var e=function(t,e){if("object"!=mn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=mn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mn(e)?e:e+""}function wn(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}Fe(cn||(cn=wn(["@import url(https://zyx.wumbl3.xyz/v:1.5/_/Splash/zyX-Splash.css)"])));var kn=function(){return t=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.version,o=void 0===r?"alpha 0.1":r,i=n.title,a=void 0===i?document.title:i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ve(ln||(ln=wn(['\n\t\t\t<div this="main" class="Splash-Overlay noTapHighlight">\n\t\t\t\t<div id="Splash-Overlay-Dismisser" this="autoplay_tap">\n\t\t\t\t\t<div this="orb" class="GreetOrb">\n\t\t\t\t\t\t<div class="GreetOrb-inner"></div>\n\t\t\t\t\t\t<div class="GreetOrb-inner"></div>\n\t\t\t\t\t\t<div class="GreetOrb-inner"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="Greet" this="greet">\n\t\t\t\t\t\t<div class="appName-container">\n\t\t\t\t\t\t\t<p this="logo a" class="appName-base">','</p>\n\t\t\t\t\t\t\t<p this="logo b" class="appName">','</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p class="version">','</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<p class="DismissHint">',' to dismiss.</p>\n\t\t\t\t<div this="splash" class="Splash-Animation">\n\t\t\t\t\t<div class="Background"></div>\n\t\t\t\t\t<div this="M_container" class="LogoContainer">\n\t\t\t\t\t\t<div this="M" class="M">\n\t\t\t\t\t\t\t<div class="Msection a"></div>\n\t\t\t\t\t\t\t<div class="Msection b"></div>\n\t\t\t\t\t\t\t<div class="Msection c"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\n\t\t\t</div>\n\t\t'])),a,a,o,pageData.mobile?"tap":"click anywhere").bind(this).appendTo(document.body),this.main.addEventListener("click",(function(){e.orb.classList.add("enter"),e.autoplay_tap.style.pointerEvents="none",e.main.style.pointerEvents="none",jo(e).delayChain("enter").then((function(t){e.main.style.opacity=0}),300).then((function(t){e.main.remove()}),500)})),jo(this).delayChain("greet-fadein").then((function(t){return e.main.style.opacity=1}),100).then((function(t){return e.greet.style.opacity=1}),1500)},(e=[{key:"playSplash",value:function(){this.splash.style.display="grid"}}])&&bn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function En(t){return En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},En(t)}function Sn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,On(r.key),r)}}function On(t){var e=function(t,e){if("object"!=En(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=En(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==En(e)?e:e+""}function jn(t,e){return t.get(function(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}(t,e))}var xn=new WeakMap,An=function(){return t=function t(){var e,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r={},function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=this,n=xn),n.set(e,r)},e=[{key:"on",value:function(t,e){var n=this;t.includes(",")?t.split(",").forEach((function(t){return n.on(t,e)})):(t in jn(xn,this)||(jn(xn,this)[t]=[]),jn(xn,this)[t].push(e))}},{key:"call",value:function(t){var e=jn(xn,this)[t];if(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i,a=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Sn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(e);try{for(a.s();!(i=a.n()).done;)i.value.apply(void 0,r)}catch(t){a.e(t)}finally{a.f()}}}}],e&&_n(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),Tn=document.createElement("canvas");Tn.width=500,Tn.height=500;var Pn=200,Ln=Tn.getContext("2d",{willReadFrequently:!0});function Cn(t){return new Promise((function(e,n){var r=new Image;r.crossOrigin="Anonymous";var o,i,a=-4,u={r:0,g:0,b:0},s=0;r.src=t,r.onload=function(){if(Ln.drawImage(r,0,0,500,500),!Ln)return e();try{o=Ln.getImageData(0,0,500,500)}catch(t){return console.log("error",t),e()}for(i=o.data.length;(a+=120)<i;)++s,u.r+=o.data[a],u.g+=o.data[a+1],u.b+=o.data[a+2];r.remove(),u.r=~~(u.r/s),u.g=~~(u.g/s),u.b=~~(u.b/s);var t=u.r/=255,n=u.g/=255,c=u.b/=255,l=Math.min(t,n,c),f=Math.max(t,n,c),h=f-l,p=0,y=0,v=0;p=0==h?0:f==t?(n-c)/h%6:f==n?(c-t)/h+2:(t-n)/h+4,(p=Math.round(60*p))<0&&(p+=360),v=(f+l)/2,y=(100*(y=0==h?0:h/(1-Math.abs(2*v-1)))).toFixed(1),v=(100*v).toFixed(1),y<3&&(p=Pn),e({h:p,s:y,l:v})}}))}function Mn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Rn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Rn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nn(t){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nn(t)}function In(){return In="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},In.apply(this,arguments)}function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fn(r.key),r)}}function Bn(t,e,n){return e&&Dn(t.prototype,e),n&&Dn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fn(t){var e=function(t,e){if("object"!=Nn(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=Nn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nn(e)?e:e+""}function zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qn(t,e,n){return e=Vn(e),function(t,e){if(e&&("object"===Nn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yn(t)}(t,Xn()?Reflect.construct(e,n||[],Vn(t).constructor):e.apply(t,n))}function Yn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hn(t,e)}function Un(t){var e="function"==typeof Map?new Map:void 0;return Un=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(Xn())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&Hn(o,n.prototype),o}(t,arguments,Vn(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Hn(n,t)},Un(t)}function Xn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xn=function(){return!!t})()}function Hn(t,e){return Hn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hn(t,e)}function Vn(t){return Vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vn(t)}var Gn=Object.create(null);Gn.open="0",Gn.close="1",Gn.ping="2",Gn.pong="3",Gn.message="4",Gn.upgrade="5",Gn.noop="6";var Kn=Object.create(null);Object.keys(Gn).forEach((function(t){Kn[Gn[t]]=t}));for(var $n={type:"error",data:"parser error"},Zn="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Jn="function"==typeof ArrayBuffer,Qn=function(t,e,n){var r,o=t.type,i=t.data;return Zn&&i instanceof Blob?e?n(i):tr(i,n):Jn&&(i instanceof ArrayBuffer||(r=i,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?e?n(i):tr(new Blob([i]),n):n(Gn[o]+(i||""))},tr=function(t,e){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)},er="undefined"==typeof Uint8Array?[]:new Uint8Array(256),nr=0;nr<64;nr++)er["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(nr)]=nr;var rr="function"==typeof ArrayBuffer,or=function(t,e){if("string"!=typeof t)return{type:"message",data:ar(t,e)};var n=t.charAt(0);return"b"===n?{type:"message",data:ir(t.substring(1),e)}:Kn[n]?t.length>1?{type:Kn[n],data:t.substring(1)}:{type:Kn[n]}:$n},ir=function(t,e){if(rr){var n=function(t){var e,n,r,o,i,a=.75*t.length,u=t.length,s=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c=new ArrayBuffer(a),l=new Uint8Array(c);for(e=0;e<u;e+=4)n=er[t.charCodeAt(e)],r=er[t.charCodeAt(e+1)],o=er[t.charCodeAt(e+2)],i=er[t.charCodeAt(e+3)],l[s++]=n<<2|r>>4,l[s++]=(15&r)<<4|o>>2,l[s++]=(3&o)<<6|63&i;return c}(t);return ar(n,e)}return{base64:!0,data:t}},ar=function(t,e){return"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t},ur=String.fromCharCode(30);function sr(t){if(t)return function(t){for(var e in sr.prototype)t[e]=sr.prototype[e];return t}(t)}sr.prototype.on=sr.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},sr.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},sr.prototype.off=sr.prototype.removeListener=sr.prototype.removeAllListeners=sr.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<r.length;o++)if((n=r[o])===e||n.fn===e){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},sr.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,e)}return this},sr.prototype.emitReserved=sr.prototype.emit,sr.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},sr.prototype.hasListeners=function(t){return!!this.listeners(t).length};var cr="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function lr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e}),{})}var fr=setTimeout,hr=clearTimeout;function pr(t,e){e.useNativeTimers?(t.setTimeoutFn=fr.bind(cr),t.clearTimeoutFn=hr.bind(cr)):(t.setTimeoutFn=setTimeout.bind(cr),t.clearTimeoutFn=clearTimeout.bind(cr))}var yr,vr=function(t){function e(t,n,r){var o;return zn(this,e),(o=qn(this,e,[t])).description=n,o.context=r,o.type="TransportError",o}return Wn(e,Un(Error)),Bn(e)}(),dr=function(t){function e(t){var n;return zn(this,e),(n=qn(this,e)).writable=!1,pr(Yn(n),t),n.opts=t,n.query=t.query,n.readyState="",n.socket=t.socket,n}return Wn(e,sr),Bn(e,[{key:"onError",value:function(t,n,r){return In(Vn(e.prototype),"emitReserved",this).call(this,"error",new vr(t,n,r)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(t){"open"===this.readyState&&this.write(t)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,In(Vn(e.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(t){var e=or(t,this.socket.binaryType);this.onPacket(e)}},{key:"onPacket",value:function(t){In(Vn(e.prototype),"emitReserved",this).call(this,"packet",t)}},{key:"onClose",value:function(t){this.readyState="closed",In(Vn(e.prototype),"emitReserved",this).call(this,"close",t)}}])}(),mr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),br={},gr=0,wr=0;function kr(t){var e="";do{e=mr[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function Er(){var t=kr(+new Date);return t!==yr?(gr=0,yr=t):t+"."+kr(gr++)}for(;wr<64;wr++)br[mr[wr]]=wr;function Sr(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}var _r=!1;try{_r="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Gn){}var Or=_r;function jr(t){var e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||Or))return new XMLHttpRequest}catch(t){}if(!e)try{return new(cr[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}function xr(){}var Ar=null!=new jr({xdomain:!1}).responseType,Tr=function(t){function e(t,n){var r;return zn(this,e),pr(Yn(r=qn(this,e)),n),r.opts=n,r.method=n.method||"GET",r.uri=t,r.async=!1!==n.async,r.data=void 0!==n.data?n.data:null,r.create(),r}return Wn(e,sr),Bn(e,[{key:"create",value:function(){var t=this,n=lr(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd,n.xscheme=!!this.opts.xs;var r=this.xhr=new jr(n);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var o in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this.opts.extraHeaders[o])}catch(n){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(n){}try{r.setRequestHeader("Accept","*/*")}catch(n){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?t.onLoad():t.setTimeoutFn((function(){t.onError("number"==typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(n){return void this.setTimeoutFn((function(){t.onError(n)}),0)}"undefined"!=typeof document&&(this.index=e.requestsCount++,e.requests[this.index]=this)}},{key:"onError",value:function(t){this.emitReserved("error",t,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=xr,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete e.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var t=this.xhr.responseText;null!==t&&(this.emitReserved("data",t),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}])}();function Pr(){for(var t in Tr.requests)Tr.requests.hasOwnProperty(t)&&Tr.requests[t].abort()}Tr.requestsCount=0,Tr.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",Pr):"function"==typeof addEventListener&&addEventListener("onpagehide"in cr?"pagehide":"unload",Pr,!1));var Lr="function"==typeof Promise&&"function"==typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t,e){return e(t,0)},Cr=cr.WebSocket||cr.MozWebSocket,Mr="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Rr={websocket:function(t){function e(t){var n;return zn(this,e),(n=qn(this,e,[t])).supportsBinary=!t.forceBase64,n}return Wn(e,dr),Bn(e,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var t=this.uri(),e=this.opts.protocols,n=Mr?{}:lr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=Mr?new Cr(t,e,n):e?new Cr(t,e):new Cr(t)}catch(t){return this.emitReserved("error",t)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var t=this;this.ws.onopen=function(){t.opts.autoUnref&&t.ws._socket.unref(),t.onOpen()},this.ws.onclose=function(e){return t.onClose({description:"websocket connection closed",context:e})},this.ws.onmessage=function(e){return t.onData(e.data)},this.ws.onerror=function(e){return t.onError("websocket error",e)}}},{key:"write",value:function(t){var e=this;this.writable=!1;for(var n=function(){var n=t[r],o=r===t.length-1;Qn(n,e.supportsBinary,(function(t){try{e.ws.send(t)}catch(t){}o&&Lr((function(){e.writable=!0,e.emitReserved("drain")}),e.setTimeoutFn)}))},r=0;r<t.length;r++)n()}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=Er()),this.supportsBinary||(t.b64=1);var r=Sr(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!Cr}}])}(),polling:function(t){function e(t){var n;if(zn(this,e),(n=qn(this,e,[t])).polling=!1,"undefined"!=typeof location){var r="https:"===location.protocol,o=location.port;o||(o=r?"443":"80"),n.xd="undefined"!=typeof location&&t.hostname!==location.hostname||o!==t.port,n.xs=t.secure!==r}var i=t&&t.forceBase64;return n.supportsBinary=Ar&&!i,Yn(n)}return Wn(e,dr),Bn(e,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(t){var e=this;this.readyState="pausing";var n=function(){e.readyState="paused",t()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(t){var e=this;(function(t,e){for(var n=t.split(ur),r=[],o=0;o<n.length;o++){var i=or(n[o],e);if(r.push(i),"error"===i.type)break}return r})(t,this.socket.binaryType).forEach((function(t){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose({description:"transport closed by the server"}),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var t=this,e=function(){t.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}},{key:"write",value:function(t){var e=this;this.writable=!1,function(t,n){var r=t.length,o=new Array(r),i=0;t.forEach((function(t,n){Qn(t,!1,(function(t){o[n]=t,++i===r&&function(t){e.doWrite(t,(function(){e.writable=!0,e.emitReserved("drain")}))}(o.join(ur))}))}))}(t)}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Er()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=Sr(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new Tr(this.uri(),t)}},{key:"doWrite",value:function(t,e){var n=this,r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",(function(t,e){n.onError("xhr post error",t,e)}))}},{key:"doPoll",value:function(){var t=this,e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(function(e,n){t.onError("xhr poll error",e,n)})),this.pollXhr=e}}])}()},Nr=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ir=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Dr(t){var e=t,n=t.indexOf("["),r=t.indexOf("]");-1!=n&&-1!=r&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));for(var o=Nr.exec(t||""),i={},a=14;a--;)i[Ir[a]]=o[a]||"";return-1!=n&&-1!=r&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=function(t,e){var n=e.replace(/\/{2,9}/g,"/").split("/");return"/"!=e.slice(0,1)&&0!==e.length||n.splice(0,1),"/"==e.slice(-1)&&n.splice(n.length-1,1),n}(0,i.path),i.queryKey=function(t,e){var n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,r){e&&(n[e]=r)})),n}(0,i.query),i}var Br=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return zn(this,e),n=qn(this,e),t&&"object"==Nn(t)&&(r=t,t=null),t?(t=Dr(t),r.hostname=t.host,r.secure="https"===t.protocol||"wss"===t.protocol,r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=Dr(r.host).host),pr(Yn(n),r),n.secure=null!=r.secure?r.secure:"undefined"!=typeof location&&"https:"===location.protocol,r.hostname&&!r.port&&(r.port=n.secure?"443":"80"),n.hostname=r.hostname||("undefined"!=typeof location?location.hostname:"localhost"),n.port=r.port||("undefined"!=typeof location&&location.port?location.port:n.secure?"443":"80"),n.transports=r.transports||["polling","websocket"],n.readyState="",n.writeBuffer=[],n.prevBufferLen=0,n.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},r),n.opts.path=n.opts.path.replace(/\/$/,"")+"/","string"==typeof n.opts.query&&(n.opts.query=function(t){for(var e={},n=t.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}(n.opts.query)),n.id=null,n.upgrades=null,n.pingInterval=null,n.pingTimeout=null,n.pingTimeoutTimer=null,"function"==typeof addEventListener&&(n.opts.closeOnBeforeunload&&(n.beforeunloadEventListener=function(){n.transport&&(n.transport.removeAllListeners(),n.transport.close())},addEventListener("beforeunload",n.beforeunloadEventListener,!1)),"localhost"!==n.hostname&&(n.offlineEventListener=function(){n.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",n.offlineEventListener,!1))),n.open(),n}return Wn(e,sr),Bn(e,[{key:"createTransport",value:function(t){var e=Object.assign({},this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);var n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Rr[t](n)}},{key:"open",value:function(){var t,n=this;if(this.opts.rememberUpgrade&&e.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){n.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}},{key:"setTransport",value:function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(t){return e.onClose("transport close",t)}))}},{key:"probe",value:function(t){var n=this,r=this.createTransport(t),o=!1;e.priorWebsocketSuccess=!1;var i=function(){o||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(t){if(!o)if("pong"===t.type&&"probe"===t.data){if(n.upgrading=!0,n.emitReserved("upgrading",r),!r)return;e.priorWebsocketSuccess="websocket"===r.name,n.transport.pause((function(){o||"closed"!==n.readyState&&(f(),n.setTransport(r),r.send([{type:"upgrade"}]),n.emitReserved("upgrade",r),r=null,n.upgrading=!1,n.flush())}))}else{var i=new Error("probe error");i.transport=r.name,n.emitReserved("upgradeError",i)}})))};function a(){o||(o=!0,f(),r.close(),r=null)}var u=function(t){var e=new Error("probe error: "+t);e.transport=r.name,a(),n.emitReserved("upgradeError",e)};function s(){u("transport closed")}function c(){u("socket closed")}function l(t){r&&t.name!==r.name&&a()}var f=function(){r.removeListener("open",i),r.removeListener("error",u),r.removeListener("close",s),n.off("close",c),n.off("upgrading",l)};r.once("open",i),r.once("error",u),r.once("close",s),this.once("close",c),this.once("upgrading",l),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",e.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var t=0,n=this.upgrades.length;t<n;t++)this.probe(this.upgrades[t])}},{key:"onPacket",value:function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}},{key:"onHandshake",value:function(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var t=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){t.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var t,e=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(e+="string"==typeof(t=r)?function(t){for(var e=0,n=0,r=0,o=t.length;r<o;r++)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this.maxPayload)return this.writeBuffer.slice(0,n);e+=2}return this.writeBuffer}},{key:"write",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"send",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"sendPacket",value:function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:t,data:e,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var t=this,e=function(){t.onClose("forced close"),t.transport.close()},n=function n(){t.off("upgrade",n),t.off("upgradeError",n),e()},r=function(){t.once("upgrade",n),t.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){t.upgrading?r():e()})):this.upgrading?r():e()),this}},{key:"onError",value:function(t){e.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}},{key:"onClose",value:function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}])}();Br.protocol=4;var Fr,zr="function"==typeof ArrayBuffer,qr=Object.prototype.toString,Yr="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===qr.call(Blob),Wr="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===qr.call(File);function Ur(t){return zr&&(t instanceof ArrayBuffer||function(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))||Yr&&t instanceof Blob||Wr&&t instanceof File}function Xr(t,e){if(!t||"object"!=Nn(t))return!1;if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(Xr(t[n]))return!0;return!1}if(Ur(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return Xr(t.toJSON(),!0);for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&Xr(t[o]))return!0;return!1}function Hr(t){var e=[],n=t.data,r=t;return r.data=Vr(n,e),r.attachments=e.length,{packet:r,buffers:e}}function Vr(t,e){if(!t)return t;if(Ur(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){for(var r=new Array(t.length),o=0;o<t.length;o++)r[o]=Vr(t[o],e);return r}if("object"==Nn(t)&&!(t instanceof Date)){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=Vr(t[a],e));return i}return t}function Gr(t,e){return t.data=Kr(t.data,e),t.attachments=void 0,t}function Kr(t,e){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=Kr(t[n],e);else if("object"==Nn(t))for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Kr(t[r],e));return t}!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(Fr||(Fr={}));var $r=function(t){function e(t){var n;return zn(this,e),(n=qn(this,e)).reviver=t,n}return Wn(e,sr),Bn(e,[{key:"add",value:function(t){var n;if("string"==typeof t){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");(n=this.decodeString(t)).type===Fr.BINARY_EVENT||n.type===Fr.BINARY_ACK?(this.reconstructor=new Zr(n),0===n.attachments&&In(Vn(e.prototype),"emitReserved",this).call(this,"decoded",n)):In(Vn(e.prototype),"emitReserved",this).call(this,"decoded",n)}else{if(!Ur(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,In(Vn(e.prototype),"emitReserved",this).call(this,"decoded",n))}}},{key:"decodeString",value:function(t){var n=0,r={type:Number(t.charAt(0))};if(void 0===Fr[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Fr.BINARY_EVENT||r.type===Fr.BINARY_ACK){for(var o=n+1;"-"!==t.charAt(++n)&&n!=t.length;);var i=t.substring(o,n);if(i!=Number(i)||"-"!==t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(i)}if("/"===t.charAt(n+1)){for(var a=n+1;++n&&","!==t.charAt(n)&&n!==t.length;);r.nsp=t.substring(a,n)}else r.nsp="/";var u=t.charAt(n+1);if(""!==u&&Number(u)==u){for(var s=n+1;++n;){var c=t.charAt(n);if(null==c||Number(c)!=c){--n;break}if(n===t.length)break}r.id=Number(t.substring(s,n+1))}if(t.charAt(++n)){var l=this.tryParse(t.substr(n));if(!e.isPayloadValid(r.type,l))throw new Error("invalid payload");r.data=l}return r}},{key:"tryParse",value:function(t){try{return JSON.parse(t,this.reviver)}catch(t){return!1}}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(t,e){switch(t){case Fr.CONNECT:return"object"==Nn(e);case Fr.DISCONNECT:return void 0===e;case Fr.CONNECT_ERROR:return"string"==typeof e||"object"==Nn(e);case Fr.EVENT:case Fr.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case Fr.ACK:case Fr.BINARY_ACK:return Array.isArray(e)}}}])}(),Zr=function(){return Bn((function t(e){zn(this,t),this.packet=e,this.buffers=[],this.reconPack=e}),[{key:"takeBinaryData",value:function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=Gr(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}])}(),Jr=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Fr},Encoder:function(){return Bn((function t(e){zn(this,t),this.replacer=e}),[{key:"encode",value:function(t){return t.type!==Fr.EVENT&&t.type!==Fr.ACK||!Xr(t)?[this.encodeAsString(t)]:(t.type=t.type===Fr.EVENT?Fr.BINARY_EVENT:Fr.BINARY_ACK,this.encodeAsBinary(t))}},{key:"encodeAsString",value:function(t){var e=""+t.type;return t.type!==Fr.BINARY_EVENT&&t.type!==Fr.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data,this.replacer)),e}},{key:"encodeAsBinary",value:function(t){var e=Hr(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}}])}(),Decoder:$r});function Qr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}var to=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),eo=function(t){function e(t,n,r){var o;return zn(this,e),(o=qn(this,e)).connected=!1,o.receiveBuffer=[],o.sendBuffer=[],o.ids=0,o.acks={},o.flags={},o.io=t,o.nsp=n,r&&r.auth&&(o.auth=r.auth),o.io._autoConnect&&o.open(),o}return Wn(e,sr),Bn(e,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var t=this.io;this.subs=[Qr(t,"open",this.onopen.bind(this)),Qr(t,"packet",this.onpacket.bind(this)),Qr(t,"error",this.onerror.bind(this)),Qr(t,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this}},{key:"emit",value:function(t){if(to.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.unshift(t);var o={type:Fr.EVENT,data:n,options:{}};if(o.options.compress=!1!==this.flags.compress,"function"==typeof n[n.length-1]){var i=this.ids++,a=n.pop();this._registerAckCallback(i,a),o.id=i}var u=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!u||!this.connected)||(this.connected?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}},{key:"_registerAckCallback",value:function(t,e){var n=this,r=this.flags.timeout;if(void 0!==r){var o=this.io.setTimeoutFn((function(){delete n.acks[t];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===t&&n.sendBuffer.splice(r,1);e.call(n,new Error("operation has timed out"))}),r);this.acks[t]=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.io.clearTimeoutFn(o),e.apply(n,[null].concat(r))}}else this.acks[t]=e}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var t=this;"function"==typeof this.auth?this.auth((function(e){t.packet({type:Fr.CONNECT,data:e})})):this.packet({type:Fr.CONNECT,data:this.auth})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t,e){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,e)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case Fr.CONNECT:if(t.data&&t.data.sid){var e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Fr.EVENT:case Fr.BINARY_EVENT:this.onevent(t);break;case Fr.ACK:case Fr.BINARY_ACK:this.onack(t);break;case Fr.DISCONNECT:this.ondisconnect();break;case Fr.CONNECT_ERROR:this.destroy();var n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}},{key:"emitEvent",value:function(t){if(this._anyListeners&&this._anyListeners.length){var n,r=Mn(this._anyListeners.slice());try{for(r.s();!(n=r.n()).done;)n.value.apply(this,t)}catch(t){r.e(t)}finally{r.f()}}In(Vn(e.prototype),"emit",this).apply(this,t)}},{key:"ack",value:function(t){var e=this,n=!1;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];n||(n=!0,e.packet({type:Fr.ACK,id:t,data:o}))}}},{key:"onack",value:function(t){var e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}},{key:"onconnect",value:function(t){this.id=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var t=this;this.receiveBuffer.forEach((function(e){return t.emitEvent(e)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(e){t.notifyOutgoingListeners(e),t.packet(e)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(t){return t()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Fr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(t){return this.flags.timeout=t,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var e=this._anyListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}},{key:"prependAnyOutgoing",value:function(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}},{key:"offAnyOutgoing",value:function(t){if(!this._anyOutgoingListeners)return this;if(t){for(var e=this._anyOutgoingListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var e,n=Mn(this._anyOutgoingListeners.slice());try{for(n.s();!(e=n.n()).done;)e.value.apply(this,t.data)}catch(t){n.e(t)}finally{n.f()}}}}])}();function no(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}no.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=1&Math.floor(10*e)?t+n:t-n}return 0|Math.min(t,this.max)},no.prototype.reset=function(){this.attempts=0},no.prototype.setMin=function(t){this.ms=t},no.prototype.setMax=function(t){this.max=t},no.prototype.setJitter=function(t){this.jitter=t};var ro=function(t){function e(t,n){var r,o;zn(this,e),(r=qn(this,e)).nsps={},r.subs=[],t&&"object"==Nn(t)&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",r.opts=n,pr(Yn(r),n),r.reconnection(!1!==n.reconnection),r.reconnectionAttempts(n.reconnectionAttempts||1/0),r.reconnectionDelay(n.reconnectionDelay||1e3),r.reconnectionDelayMax(n.reconnectionDelayMax||5e3),r.randomizationFactor(null!==(o=n.randomizationFactor)&&void 0!==o?o:.5),r.backoff=new no({min:r.reconnectionDelay(),max:r.reconnectionDelayMax(),jitter:r.randomizationFactor()}),r.timeout(null==n.timeout?2e4:n.timeout),r._readyState="closed",r.uri=t;var i=n.parser||Jr;return r.encoder=new i.Encoder,r.decoder=new i.Decoder,r._autoConnect=!1!==n.autoConnect,r._autoConnect&&r.open(),r}return Wn(e,sr),Bn(e,[{key:"reconnection",value:function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this._timeout=t,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(t){var e=this;if(~this._readyState.indexOf("open"))return this;this.engine=new Br(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var o=Qr(n,"open",(function(){r.onopen(),t&&t()})),i=Qr(n,"error",(function(n){r.cleanup(),r._readyState="closed",e.emitReserved("error",n),t?t(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var a=this._timeout;0===a&&o();var u=this.setTimeoutFn((function(){o(),n.close(),n.emit("error",new Error("timeout"))}),a);this.opts.autoUnref&&u.unref(),this.subs.push((function(){clearTimeout(u)}))}return this.subs.push(o),this.subs.push(i),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push(Qr(t,"ping",this.onping.bind(this)),Qr(t,"data",this.ondata.bind(this)),Qr(t,"error",this.onerror.bind(this)),Qr(t,"close",this.onclose.bind(this)),Qr(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){try{this.decoder.add(t)}catch(t){this.onclose("parse error",t)}}},{key:"ondecoded",value:function(t){var e=this;Lr((function(){e.emitReserved("packet",t)}),this.setTimeoutFn)}},{key:"onerror",value:function(t){this.emitReserved("error",t)}},{key:"socket",value:function(t,e){var n=this.nsps[t];return n||(n=new eo(this,t,e),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var r=n[e];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(t){for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(t){return t()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t,e){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,e),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){e.skipReconnect||(t.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((function(n){n?(e._reconnecting=!1,e.reconnect(),t.emitReserved("reconnect_error",n)):e.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}])}(),oo={};function io(t,e){"object"==Nn(t)&&(e=t,t=void 0);var n,r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=t;n=n||"undefined"!=typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==n?n.protocol+"//"+t:"https://"+t),r=Dr(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}(t,(e=e||{}).path||"/socket.io"),o=r.source,i=r.id,a=r.path,u=oo[i]&&a in oo[i].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||u?n=new ro(o,e):(oo[i]||(oo[i]=new ro(o,e)),n=oo[i]),r.query&&!e.query&&(e.query=r.queryKey),n.socket(r.path,e)}function ao(t){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ao(t)}function uo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return so(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?so(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function co(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lo(r.key),r)}}function lo(t){var e=function(t,e){if("object"!=ao(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ao(e)?e:e+""}Object.assign(io,{Manager:ro,Socket:eo,io,connect:io});var fo=function(){return t=function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.endpointUrl,o=n.events;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endpointUrl=r,this.room_code,this.logging=!1,this.sio=io(this.endpointUrl),this.sio.on("connect",(function(){e.logging&&console.log("[socketio] Connected to server"),e.connected()})),this.extendedEvents={},this.bind(o)},(e=[{key:"connect",value:function(){this.sio.connect()}},{key:"connected",value:function(){this.extendedEvents.connect&&this.extendedEvents.connect()}},{key:"join",value:function(t){this.room_code=t,this.logging&&console.log("[socketio] Join room",t),this.sio.emit("enter",{room_code:this.room_code})}},{key:"emit",value:function(t,e){e||(e={}),this.sio.emit(t,e)}},{key:"bind",value:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=uo(n[e],2),o=r[0],i=r[1];["connect"].includes(o)?this.extendedEvents[o]=i:this.sio.on(o,i)}}}])&&co(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function ho(t){return ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ho(t)}function po(){po=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),u=new P(r||[]);return o(a,"_invoke",{value:j(t,n,u)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",y="executing",v="completed",d={};function m(){}function b(){}function g(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,E=k&&k(k(L([])));E&&E!==n&&r.call(E,a)&&(w=E);var S=g.prototype=m.prototype=Object.create(w);function _(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(o,i,a,u){var s=f(t[o],t,i);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==ho(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,u)}))}u(s.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,n,r){var o=h;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var s=x(u,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=y;var c=f(e,n,r);if("normal"===c.type){if(o=r.done?v:p,c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o=v,r.method="throw",r.arg=c.arg)}}}function x(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function L(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(ho(e)+" is not iterable")}return b.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},_(O.prototype),c(O.prototype,u,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new O(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(S),c(S,s,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=L,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return u.type="throw",u.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:L(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}function yo(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,o)}function vo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mo(r.key),r)}}function mo(t){var e=function(t,e){if("object"!=ho(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ho(e)?e:e+""}var bo,go=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.AUDIO_ROOT=e,this.ctx=new AudioContext,this.gainNode=this.ctx.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.ctx.destination),this.SOUNDS={},this.muted=!1},e=[{key:"addSound",value:function(t){var e=this;return new Promise((function(n,r){if(Object.keys(e.SOUNDS).includes(t))return n();var o=new XMLHttpRequest;o.onload=function(o){e.ctx.decodeAudioData(o.target.response,(function(r){e.SOUNDS[t]=r,n(e.SOUNDS[t])}),(function(t){r(t)}))},o.open("GET",e.AUDIO_ROOT+t,!0),o.responseType="arraybuffer",o.send()}))}},{key:"stop",value:function(t){t.stop&&t.stop(),t.disconnect&&t.disconnect()}},{key:"toggleMute",value:function(){return this.muted=!this.muted,this.muted}},{key:"createBuffer",value:function(t,e){var n=this,r=this.ctx.createBufferSource();return r.buffer=this.SOUNDS[t],r.connect(this.gainNode),e?r.onended=function(){return e()}:e=function(){n.stop(r)},r}},{key:"createAndExecute",value:function(t,e){return this.createBuffer(t,e).start(0)}},{key:"play",value:(n=po().mark((function t(){var e,n,r,o,i,a,u,s,c,l,f,h,p,y=this,v=arguments;return po().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=v.length>0&&void 0!==v[0]?v[0]:{}).source,r=e.name,o=e.looping,i=void 0!==o&&o,a=e.delay,u=void 0===a?0:a,s=e.volume,c=void 0===s?1:s,l=e.loopOnEnded,f=e.n,h=void 0===f?0:f,t.next=3,this.addSound(r);case 3:if(0!==(c=this.muted?0:c)){t.next=6;break}return t.abrupt("return");case 6:if(this.gainNode.gain.value=wo(c),!i&&!h){t.next=15;break}return i=!0,p=h-- >0,l=function(){!i||p&&h--<=0||setTimeout((function(t){n=y.createAndExecute(r,l)}),u)},n=this.createAndExecute(r,l),t.abrupt("return",{source:n,stop:function(){return i=!1}});case 15:this.createAndExecute(r);case 16:case"end":return t.stop()}}),t,this)})),r=function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function a(t){yo(i,r,o,a,u,"next",t)}function u(t){yo(i,r,o,a,u,"throw",t)}a(void 0)}))},function(){return r.apply(this,arguments)})}],e&&vo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function wo(t){return t<=0?0:t>=1?1:Math.pow(t,3)}var ko,Eo,So=import.meta.url,_o=So.split("/").slice(-2)[0];console.log("[ZyX] Version:",_o,"BaseDir:",So),Fe(bo||(ko=["@import url(","_/@css/zyX-Attr.css);"],Eo||(Eo=ko.slice(0)),bo=Object.freeze(Object.defineProperties(ko,{raw:{value:Object.freeze(Eo)}}))),So);var Oo={forQuery:lt,setProps:ft,pathContains:pt,events:function(t,e,n){var r,o=it(e.split(" "));try{for(o.s();!(r=o.n()).done;){var i=r.value;t.addEventListener(i,n)}}catch(t){o.e(t)}finally{o.f()}},delay:yn,clearDelay:vn,delayChain:hn,breakDelayChain:pn,rightClick:function(t,e){zyX(t).events("contextmenu",(function(t){return e(t)}))},debounce:dn,of:function(t,e){return Array(t).fill().map((function(t){var n=e();return n instanceof xe&&n.const(),n}))}};function jo(t){return new Proxy(Oo,{get:function(e,n){if(e.hasOwnProperty(n)){var r=e[n];return function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return r.apply(void 0,[t].concat(n))}}throw new Error("zyX().".concat(n," is not a function"))},set:function(){}})}function xo(){return navigator.maxTouchPoints>0}var Ao=e.eL,To=e.l6,Po=e.gA,Lo=e.mb,Co=e.jN,Mo=e.y3,Ro=e.XT,No=e.Pr,Io=e.N_,Do=e.OS,Bo=e.oB,Fo=e.$U,zo=e.tT,qo=e.is,Yo=e.YW,Wo=e.nR,Uo=e.AH,Xo=e.sg,Ho=e.Ay,Vo=e.cb,Go=e.Px,Ko=e.EL,$o=e.Jx,Zo=e.qy,Jo=e.Fr,Qo=e.cY,ti=e.rN,ei=e.xB,ni=e.ak,ri=e.O8,oi=e.zk,ii=e.yy,ai=e.qS,ui=e.k_,si=e.op,ci=e.W7,li=e.Tw;export{Ao as AsynConstructor,To as AsyncWorker,Po as Splash,Lo as WeakRefSet,Co as ZyXArray,Mo as ZyXAudio,Ro as ZyXDomArray,No as ZyXEvents,Io as ZyXHtml,Do as ZyXInput,Bo as ZyXio,Fo as __BASEDIR__,zo as __VERSION__,qo as breakDelayChain,Yo as calculateDominantColor,Wo as clearDelay,Uo as css,Xo as debounce,Ho as default,Vo as delay,Go as delayChain,Ko as forQuery,$o as getImageBlob,Zo as html,Jo as isMobile,Qo as offset,ti as offsetLimit,ei as pathContains,ni as pointerDrag,ri as pointerEventPathContains,oi as setProps,ii as sleep,ai as timeoutLimiter,ui as zyXCookie,si as zyXGet,ci as zyXPost,li as zyxcss};